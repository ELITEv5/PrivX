<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PLSX Stealth Shield â€” Proof of Privacy v3</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=IBM+Plex+Mono&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
:root {
  --bg: #0d0f11;
  --fg: #e5e7eb;
  --accent: #6b5cff;
  --accent2: #00c4b4;
  --muted: #9ca3af;
  --border: #1f2428;
  --card: #131518;
  --radius: 16px;
  --mono: "IBM Plex Mono", monospace;
  --sans: "Inter", system-ui, sans-serif;
}
* { box-sizing: border-box; }
body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--sans);
  margin: 0;
  line-height: 1.6;
}
h1,h2,h3,h4 { font-weight:600; margin:0 0 .4em; }
a { color: var(--accent2); text-decoration:none; }
a:hover { text-decoration:underline; }
main { max-width: 920px; margin: auto; padding: 2rem 1rem 6rem; }
header {
  text-align: center;
  padding-top: 2rem;
}
header h1 {
  font-size: 2.1rem;
  background: linear-gradient(90deg,var(--accent),var(--accent2));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: .2rem;
}
header p {
  color: var(--muted);
  font-size: 1rem;
}
button {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: .6rem 1.1rem;
  font-size: .95rem;
  cursor: pointer;
  transition: .2s ease;
}
button:hover { opacity: .85; }
button:disabled { background:#333; color:#777; cursor:not-allowed; }
input {
  width: 100%;
  max-width: 420px;
  padding: .6rem .7rem;
  margin:.4rem 0;
  border-radius: 10px;
  border:1px solid var(--border);
  background: var(--card);
  color: var(--accent2);
  font-family: var(--mono);
  text-align:center;
}
.section {
  background: var(--card);
  border:1px solid var(--border);
  border-radius: var(--radius);
  padding:1.4rem 1.6rem;
  margin:1.6rem 0;
  transition: box-shadow .2s;
}
.section:hover { box-shadow: 0 0 18px rgba(107,92,255,0.05); }
#statsPanel {
  overflow:hidden;
  transition: max-height .5s ease;
  max-height:0;
}
#statsPanel.open { max-height:600px; }
.stats-grid {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:.6rem .8rem;
  margin-top:.8rem;
}
.stats-grid div {
  background:#181a1d;
  border-radius:10px;
  padding:.6rem .8rem;
  text-align:left;
  font-family:var(--mono);
  font-size:.9rem;
}
.explainer {
  background:#111315;
  border-left:4px solid var(--accent);
  border-radius:10px;
  padding:1rem 1.2rem;
  margin:1.6rem 0;
}
footer {
  text-align:center;
  margin-top:3rem;
  color:var(--muted);
  font-size:.9rem;
}
footer hr {
  border:none;
  border-top:1px solid var(--border);
  margin:1.5rem 0;
}
#topDepositsBox {
  background:#111315;
  border-left:4px solid var(--accent2);
  border-radius:10px;
  padding:1rem 1.2rem;
  margin-top:1.4rem;
  font-size:.95rem;
  color:var(--fg);
}
#topDepositsBox h4 {
  color:var(--accent2);
  margin-bottom:.4rem;
}
#expiredList {
  font-family:var(--mono);
  color:var(--accent2);
  margin-top:.8rem;
  font-size:.9rem;
}
@media (max-width:600px){ .stats-grid { grid-template-columns:1fr; } }
</style>
</head>

<body>
<header>
  <img src="./PRIVX.png" alt="PRIVX Shield Logo" style="width:240px;max-width:60%;margin-bottom:1rem;">
  <h1>PLSX Stealth Shield</h1>
  <p>Proof of Privacy v3 â€¢ PulseChain Native</p>
  <div style="margin-top:1rem;">
    <button id="connectBtn">ğŸ”— Connect Wallet</button>
    <button id="disconnectBtn" style="display:none;">âŒ Disconnect</button>
    <div id="walletStatus" style="margin-top:.5rem;color:var(--muted);">Not connected</div>
  </div>
</header>
<main>
  <div class="explainer">
  <h3>ğŸ§­ Why the PLSX Stealth Shield Exists</h3>

  <p>Every blockchain transaction is public. Every balance, every address, every connection â€”
  all visible, forever. Transparency was meant for systems, not for people.</p>

  <p><strong>PLSX Stealth Shield</strong> exists to restore the human right to
  transact privately. Itâ€™s not about hiding â€” itâ€™s about <strong>freedom</strong>:
  the ability to act without being profiled, tracked, or targeted. Just like cash,
  your right to privacy in crypto should be unquestioned.</p>

  <p>When hundreds of users shield their funds together, something powerful happens:
  <strong>statistical invisibility.</strong> Each new deposit adds noise, each withdrawal
  blends deeper into the crowd. There is no single point of failure, no centralized mixer â€”
  just math and participation. The more people who join, the stronger the privacy field becomes.</p>

  <p>Zero-knowledge systems try to hide each transaction individually.
  PLSX Shield achieves privacy through <strong>collective participation</strong> â€”
  cheaper, faster, and infinitely scalable. Itâ€™s the power of many acting as one.
  This is <em>mathematical privacy</em>, not secrecy: every deposit is an equation,
  every withdrawal an anonymous solution.</p>

  <blockquote style="border-left:3px solid #8b5cf6;padding-left:1rem;margin:1rem 0;color:#ccc;">
    â€œCash doesnâ€™t make you a criminal. It makes you free.  
    Privacy on-chain should be no different.â€
  </blockquote>

  <p>Each deposit is locked under a <code>keccak256(secret)</code> hash,
  unlinking it from any future withdrawal. The Shieldâ€™s commitâ€“reveal
  mechanism ensures even your withdrawal intent remains hidden until
  itâ€™s safe to reveal â€” protecting you from mempool tracking and
  front-running.</p>
</div>
  
<!-- âœ… Official Contracts Section -->
<div class="section" style="background:#141414;margin-top:2.4rem;">
  <h3 style="margin-bottom:1rem;">ğŸ“œ Official Contract Addresses</h3>

  <div class="ca-box" style="background:#161616;padding:0.8rem;border-radius:8px;margin:0.8rem 0;word-break:break-all;text-align:left;">
    ğŸ’  <strong>PrivX Token</strong><br>
    <code id="caPrivx">0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986</code>
    <button class="ca-copy neon-btn" onclick="copyCA('caPrivx')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986" target="_blank" style="color:#8b5cf6;">View on PulseChain â†—</a>
  </div>

  <div class="ca-box" style="background:#161616;padding:0.8rem;border-radius:8px;margin:0.8rem 0;word-break:break-all;text-align:left;">
    ğŸª™ <strong>PLSX Token</strong><br>
    <code id="caPlsx">0x95B303987A60C71504D99Aa1b13B4DA07b0790ab</code>
    <button class="ca-copy neon-btn" onclick="copyCA('caPlsx')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x95B303987A60C71504D99Aa1b13B4DA07b0790ab" target="_blank" style="color:#8b5cf6;">View on PulseChain â†—</a>
  </div>

  <div class="ca-box" style="background:#161616;padding:0.8rem;border-radius:8px;margin:0.8rem 0;word-break:break-all;text-align:left;">
    ğŸ›¡ï¸ <strong>PLSX Stealth Shield V3</strong><br>
    <code id="caShield">0x21a3E97e2347349AC283E972A983c8e6Ee30Bef0</code>
    <button class="ca-copy neon-btn" onclick="copyCA('caShield')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x21a3E97e2347349AC283E972A983c8e6Ee30Bef0" target="_blank" style="color:#8b5cf6;">View on PulseChain â†—</a>
  </div>

  <small style="display:block;margin-top:1rem;color:#aaa;">
    ğŸ§© Verified Contracts â€¢ No Admin â€¢ No Upgrades â€¢ 100% On-Chain Autonomy
  </small>
</div>
  
  <div class="section">
    <h3>ğŸ’° Step 1 â€“ Deposit PLSX</h3>
    <p>Generate your <a href="https://elitev5.github.io/PrivX/Hash-Generator/PLSX/" target="_blank">Deposit Hash â†—</a> and enter amount.</p>
    <input id="depositAmount" placeholder="Amount (PLSX)" />
    <input id="depositHash" placeholder="Deposit Hash (0xâ€¦)" />
    <div id="depositFeeEst" style="color:var(--accent2);font-size:.9rem;margin:.4rem 0;">Estimated PRIVX Fee: â€“</div>
    <button id="approvePlsx">Approve PLSX</button>
    <button id="approvePrivx">Approve PRIVX</button>
    <button id="depositBtn">ğŸš€ Deposit</button>

    <!-- ğŸ”¹ NEW: Top 3 Deposit Insight Box -->
    <div id="topDepositsBox">
      <h4>ğŸ“Š Network Deposit Insights</h4>
      <p>Depositing a popular amount helps your transaction blend in with others for stronger privacy.</p>
      <ul id="topDepositsList" style="list-style:none;padding:0;margin-top:.6rem;">
        <li>1ï¸âƒ£ Loadingâ€¦</li>
        <li>2ï¸âƒ£ Loadingâ€¦</li>
        <li>3ï¸âƒ£ Loadingâ€¦</li>
      </ul>
      <small style="color:var(--muted);display:block;margin-top:.4rem;">Data updates every minute.</small>
    </div>
  </div>

  <div class="section">
    <h3>ğŸ•µï¸ Step 2 â€“ Commit Secret</h3>
    <input id="commitHash" placeholder="Commit Hash (0xâ€¦)" />
    <button id="commitBtn">ğŸ•¶ï¸ Commit</button>
  </div>

  <div class="section">
    <h3>ğŸ’ Step 3 â€“ Withdraw</h3>
    <input id="withdrawSecret" placeholder="Secret (UTF-8)" />
    <input id="wallet1" placeholder="Wallet 1 (0xâ€¦)" />
    <input id="wallet2" placeholder="Wallet 2 (optional)" />
    <input id="wallet3" placeholder="Wallet 3 (optional)" />
    <button id="withdrawBtn">ğŸ’ Withdraw</button>
  </div>

  <div class="section">
    <h3>ğŸ”¥ Step 4 â€“ Reclaim</h3>
    <input id="reclaimHash" placeholder="Deposit Hash (0xâ€¦)" />
    <div id="reclaimFeeEst" style="color:var(--accent2);font-size:.9rem;margin:.4rem 0;">Estimated PRIVX Fee: â€“</div>
    <button id="reclaimBtn">ğŸ”¥ Reclaim</button>

    <!-- ğŸ”¹ NEW: Find Expired Deposits -->
    <h4 style="margin-top:1.2rem;">ğŸ•’ Find Expired Deposits</h4>
    <p style="color:var(--muted);font-size:.9rem;">
      Scan for recently expired deposits that can now be reclaimed by anyone.
    </p>
    <button id="scanExpiredBtn">ğŸ” Scan Expired</button>
    <div id="expiredList">â€“</div>
  </div>

  <div class="section">
    <h3>ğŸ” Step 5 â€“ Check Deposit</h3>
    <input id="checkHash" placeholder="Deposit Hash (0xâ€¦)" />
    <button id="checkBtn">ğŸ” Check</button>
    <div id="checkResult" style="margin-top:1rem;font-family:var(--mono);color:var(--accent2);"></div>
  </div>

  <div class="section">
    <h3 style="cursor:pointer;" id="toggleStats">ğŸ“Š View Shield Stats</h3>
    <div id="statsPanel">
      <div class="stats-grid">
        <div>Vault PLSX: <span id="vaultPlsx">â€“</span></div>
        <div>Pool PRIVX: <span id="poolPrivx">â€“</span></div>
        <div>Burned PRIVX: <span id="burnedPrivx">â€“</span></div>
        <div>Burned PLSX: <span id="burnedPlsx">â€“</span></div>
        <div>Total Withdrawals: <span id="totalWithdraw">â€“</span></div>
        <div>Total Reclaimed: <span id="totalReclaimed">â€“</span></div>
      </div>
    </div>
  </div>
</main>
<footer style="margin-top:2rem;font-size:.9rem;color:#ccc;text-align:center;">
  <hr style="border:none;border-top:1px solid #333;margin:1.5rem 0;">
  
  <div class="section" style="background:#121212;border-radius:12px;padding:1.5rem;margin:1.5rem 0;border:1px solid #222;text-align:left;max-width:820px;margin:auto;">
    <h3 style="color:#00ffcc;text-align:center;">ğŸ§­ Best Practices for PLSX Shield Users</h3>
    <ul style="line-height:1.7em;margin-top:1rem;">
      <li>ğŸª™ <strong>Use a fresh wallet</strong> for every withdrawal. Never reuse an address seen on-chain before â€” it breaks anonymity.</li>
      <li>ğŸ” <strong>Keep your Secret private.</strong> Anyone with your Secret can withdraw your funds within 7 days.</li>
      <li>ğŸ’¾ <strong>Store it offline.</strong> Save your Secret in encrypted local storage or write it down securely.</li>
      <li>ğŸ•¶ï¸ <strong>Always commit before withdrawing.</strong> This protects your transaction from mempool front-running.</li>
      <li>â³ <strong>Withdraw within 7 days.</strong> After that, unclaimed deposits become reclaimable (95 % burned / 5 % rewarded).</li>
      <li>âš™ï¸ <strong>Verify contract addresses.</strong> Use only official, immutable PrivX / PLSX Shield deployments.</li>
      <li>ğŸ§© <strong>Never send more than you can afford to lose.</strong> The Shield is autonomous and cannot be reversed.</li>
      <li>ğŸ¤ <strong>More users = more privacy.</strong> Each participant expands the anonymity set for everyone.</li>
      <li>ğŸ’¡ <strong>Privacy â‰  secrecy.</strong> Like cash, privacy is a right â€” not a crime.</li>
    </ul>

    <blockquote style="border-left:3px solid #8b5cf6;padding-left:1rem;margin:1rem 0;color:#ccc;">
      â€œWhen privacy becomes a shared act, it transforms from a personal defense into a collective power.â€
    </blockquote>
  </div>

  <p style="color:#8b5cf6;font-weight:bold;">PLSX Stealth Shield â€¢ Proof of Privacy v3.2</p>
  <p style="color:#777;">PulseChain Network â€¢ MIT License â€¢ Open Source</p>
</footer>
<script>
const CONTRACT_ADDR = "0x21a3E97e2347349AC283E972A983c8e6Ee30Bef0";
const PRIVX_TOKEN = "0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986";
const PULSECHAIN_ID = "0x171";
let provider, signer, account, contract, privx, plsx;

// Collapsible stats
document.getElementById("toggleStats").onclick = () => {
  document.getElementById("statsPanel").classList.toggle("open");
};

// Universal Wallet Connect
async function connectWallet() {
  try {
    if (window.ethereum) {
      provider = new ethers.providers.Web3Provider(window.ethereum, "any");
      await provider.send("eth_requestAccounts", []);
    } else if (window.walletConnectProvider) {
      provider = new ethers.providers.Web3Provider(window.walletConnectProvider);
      await provider.send("eth_requestAccounts", []);
    } else {
      alert("No wallet detected. Install MetaMask or connect via WalletConnect.");
      return;
    }
    signer = provider.getSigner();
    account = await signer.getAddress();

    const chainId = await provider.send("eth_chainId", []);
    if (chainId !== PULSECHAIN_ID) {
      try {
        await provider.send("wallet_switchEthereumChain", [{ chainId: PULSECHAIN_ID }]);
      } catch { alert("Switch to PulseChain (369)"); return; }
    }

    document.getElementById("walletStatus").textContent =
      "Connected: " + account.slice(0, 6) + "â€¦" + account.slice(-4);
    document.getElementById("connectBtn").style.display = "none";
    document.getElementById("disconnectBtn").style.display = "inline-block";

    const abi = await fetch("./abi.json").then(r => r.json());
    contract = new ethers.Contract(CONTRACT_ADDR, abi, signer);
    privx = new ethers.Contract(PRIVX_TOKEN, [
      "function approve(address,uint256) external returns(bool)"
    ], signer);
    const plsxAddr = await contract.plsx();
    plsx = new ethers.Contract(plsxAddr, [
      "function approve(address,uint256) external returns(bool)"
    ], signer);

    provider.on("accountsChanged", () => location.reload());
    provider.on("chainChanged", () => location.reload());
  } catch (e) { alert("Wallet error: " + e.message); }
}
function disconnectWallet() {
  provider = signer = account = null;
  document.getElementById("walletStatus").textContent = "Disconnected";
  document.getElementById("connectBtn").style.display = "inline-block";
  document.getElementById("disconnectBtn").style.display = "none";
}
document.getElementById("connectBtn").onclick = connectWallet;
document.getElementById("disconnectBtn").onclick = disconnectWallet;

// Fee estimators
async function estimateFees() {
  if (!contract) return;
  const val = document.getElementById("depositAmount").value.trim();
  if (!val) return;
  try {
    const amt = ethers.utils.parseUnits(val, 18);
    const bp = await contract.DEPOSIT_FEE_BP();
    const fee = await contract.calculatePrivxFee(amt, bp);
    document.getElementById("depositFeeEst").textContent =
      "Estimated PRIVX Fee: " + ethers.utils.formatUnits(fee, 18) + " PRIVX";
  } catch {}
}
document.getElementById("depositAmount").addEventListener("input", estimateFees);

// Contract interactions
async function approvePlsx() {
  const tx = await plsx.approve(CONTRACT_ADDR, ethers.constants.MaxUint256);
  alert("PLSX Approval TX: " + tx.hash);
}
async function approvePrivx() {
  const tx = await privx.approve(CONTRACT_ADDR, ethers.constants.MaxUint256);
  alert("PRIVX Approval TX: " + tx.hash);
}
document.getElementById("approvePlsx").onclick = approvePlsx;
document.getElementById("approvePrivx").onclick = approvePrivx;

async function deposit() {
  const amt = document.getElementById("depositAmount").value.trim();
  const hash = document.getElementById("depositHash").value.trim();
  if (!amt || !hash) return alert("Enter amount and hash.");
  const tx = await contract.deposit(ethers.utils.parseUnits(amt, 18), hash);
  alert("Deposit TX: " + tx.hash);
}
document.getElementById("depositBtn").onclick = deposit;

async function commit() {
  const h = document.getElementById("commitHash").value.trim();
  if (!/^0x[0-9a-fA-F]{64}$/.test(h)) return alert("Invalid hash");
  const tx = await contract.commit(h);
  alert("Commit TX: " + tx.hash);
}
document.getElementById("commitBtn").onclick = commit;

async function withdraw() {
  const s = document.getElementById("withdrawSecret").value.trim();
  const adds = ["wallet1","wallet2","wallet3"]
    .map(i => document.getElementById(i).value.trim())
    .filter(a => ethers.utils.isAddress(a));
  if (!s || !adds.length) return alert("Enter secret and at least one address.");
  const tx = await contract.withdraw(s, adds);
  alert("Withdraw TX: " + tx.hash);
}
document.getElementById("withdrawBtn").onclick = withdraw;

async function reclaim() {
  const h = document.getElementById("reclaimHash").value.trim();
  if (!h) return alert("Enter hash");
  const tx = await contract.reclaim(h);
  alert("Reclaim TX: " + tx.hash);
}
document.getElementById("reclaimBtn").onclick = reclaim;

// ğŸ”¹ Enhanced Check Deposit with Countdown
async function checkStatus() {
  const h = document.getElementById("checkHash").value.trim();
  if (!h) return alert("Enter hash");
  const d = await contract.deposits(h);
  if (d.amount.eq(0)) {
    document.getElementById("checkResult").textContent = "âŒ Not found";
    return;
  }
  const date = new Date(Number(d.timestamp) * 1000);
  const exp = new Date(date.getTime() + 7 * 24 * 60 * 60 * 1000);
  const amt = ethers.utils.formatUnits(d.amount, 18);

  function updateCountdown() {
    const now = new Date();
    const diff = exp - now;
    if (diff <= 0) {
      document.getElementById("checkResult").innerHTML =
        `Amount: ${amt} PLSX<br>Deposited: ${date.toLocaleString()}<br>Expired â° â€” Available for Reclaim`;
      clearInterval(timer);
      return;
    }
    const hrs = Math.floor(diff / (1000 * 60 * 60));
    const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    document.getElementById("checkResult").innerHTML =
      `Amount: ${amt} PLSX<br>Deposited: ${date.toLocaleString()}<br>Expires: ${exp.toLocaleString()}<br>Time Remaining: ${hrs}h ${mins}m<br>Status: ${d.claimed ? "âœ… Claimed" : "ğŸŸ£ Active"}`;
  }
  updateCountdown();
  const timer = setInterval(updateCountdown, 60000);
}
document.getElementById("checkBtn").onclick = checkStatus;
  // === COPY CONTRACT ADDRESS FUNCTION ===
function copyCA(id) {
  const el = document.getElementById(id);
  if (!el) return;
  const text = el.textContent.trim();
  if (!text.startsWith("0x")) return;
  navigator.clipboard.writeText(text).then(() => {
    const btn = el.nextElementSibling;
    if (!btn) return;
    const original = btn.textContent;
    btn.textContent = "âœ… Copied!";
    btn.style.background = "#00ff99";
    btn.style.color = "#000";
    setTimeout(() => {
      btn.textContent = "Copy";
      btn.style.background = "#333";
      btn.style.color = "#00ffcc";
    }, 1200);
  });
}
// ğŸ”¹ Find Expired Deposits (simple example)
document.getElementById("scanExpiredBtn").onclick = async () => {
  try {
    const filter = contract.filters.Deposited();
    const logs = await contract.queryFilter(filter, -5000); // last ~5000 blocks
    const now = Math.floor(Date.now() / 1000);
    const expired = [];
    for (let log of logs) {
      const h = log.args.hash;
      const d = await contract.deposits(h);
      if (!d.claimed && now - Number(d.timestamp) > 7 * 24 * 60 * 60) {
        expired.push({ hash: h, amt: ethers.utils.formatUnits(d.amount, 18) });
      }
    }
    const box = document.getElementById("expiredList");
    if (expired.length === 0) box.innerHTML = "No expired deposits found.";
    else box.innerHTML = expired.map(x => `ğŸ’€ ${x.hash} â†’ ${x.amt} PLSX`).join("<br>");
  } catch (e) {
    console.warn("Expired scan error:", e);
    document.getElementById("expiredList").textContent = "Error scanning.";
  }
};

// ğŸ”¹ Top 3 Deposits auto-query
const pubProv = new ethers.providers.JsonRpcProvider("https://rpc.pulsechain.com");
(async () => {
  const abi = await fetch("./abi.json").then(r => r.json());
  const pub = new ethers.Contract(CONTRACT_ADDR, abi, pubProv);
  async function updateStats() {
    try {
      const [v,p,bp,bl,w,r] = await pub.getSystemStats();
      document.getElementById("vaultPlsx").textContent = Number(ethers.utils.formatUnits(v,18)).toFixed(2);
      document.getElementById("poolPrivx").textContent = Number(ethers.utils.formatUnits(p,18)).toFixed(2);
      document.getElementById("burnedPrivx").textContent = Number(ethers.utils.formatUnits(bp,18)).toFixed(2);
      document.getElementById("burnedPlsx").textContent = Number(ethers.utils.formatUnits(bl,18)).toFixed(2);
      document.getElementById("totalWithdraw").textContent = w.toString();
      document.getElementById("totalReclaimed").textContent = Number(ethers.utils.formatUnits(r,18)).toFixed(2);
    } catch (e) { console.warn("Stats error", e); }
  }

  async function updateTopDeposits() {
    try {
      const filter = pub.filters.Deposited();
      const logs = await pub.queryFilter(filter, -5000);
      const map = {};
      for (let l of logs) {
        const amt = Number(ethers.utils.formatUnits(l.args.amount, 18));
        const key = Math.round(amt * 100) / 100;
        map[key] = (map[key] || 0) + 1;
      }
      const top = Object.entries(map)
        .sort((a,b) => b[1]-a[1])
        .slice(0,3)
        .map(([amt,count],i) => `${i+1}ï¸âƒ£ ${amt} PLSX (${count} deposits)`);
      document.getElementById("topDepositsList").innerHTML = top.join("<br>");
    } catch (e) {
      console.warn("Top deposits error", e);
    }
  }

  updateStats();
  updateTopDeposits();
  setInterval(updateStats, 30000);
  setInterval(updateTopDeposits, 60000);
})();
</script>
</body>
</html>
