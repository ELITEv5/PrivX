<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PrivX Shield Relay â€” Official Helper v4.8 â€œPulse Editionâ€</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
  body{font-family:system-ui,sans-serif;background:#0a0a0a;color:#eee;text-align:center;padding:2rem;max-width:900px;margin:auto}
  h1{color:#8b5cf6;font-size:2rem;margin-bottom:.3rem}
  h3{color:#00ffcc}
  a{color:#8b5cf6;text-decoration:none}
  a:hover{text-decoration:underline;color:#a36fff}
  button{background:#5c00ff;color:#fff;padding:.6rem 1rem;border:none;border-radius:8px;font-size:1rem;cursor:pointer;margin:.3rem;transition:.2s}
  button:hover{background:#6f14ff}
  button:disabled{background:#333;cursor:not-allowed}
  input{width:90%;max-width:420px;margin:.3rem 0;padding:.6rem;border-radius:8px;border:none;font-size:1rem;text-align:center;background:#161616;color:#00ffcc}
  .section{border:1px solid #222;border-radius:12px;padding:1.3rem;margin:1.5rem 0;background:#111}
  #status{margin-bottom:1rem;color:#f55;font-weight:bold}
  footer{margin-top:2rem;font-size:.9rem;color:#777}
  small{color:#aaa;display:block;margin-top:.5rem}
  .warning{color:#ffcc00}
  hr{border:none;border-top:1px solid #333;margin:1.5rem 0}
  .ca-box{background:#161616;padding:0.6rem;border-radius:8px;margin:0.3rem 0;word-break:break-all}
  .ca-copy{background:#333;color:#00ffcc;border:none;border-radius:6px;padding:0.3rem 0.7rem;cursor:pointer;font-size:0.85rem;margin-left:0.4rem;}
  .ca-copy:hover{background:#555;}
  .explainer{background:#141414;border-left:5px solid #8b5cf6;padding:1rem;border-radius:8px;text-align:left;line-height:1.5em;margin-bottom:1.5rem;}
  .hashList{background:#0f0f0f;border-radius:10px;padding:1rem;margin-top:1rem;text-align:left;max-height:220px;overflow-y:auto;}
  .hashItem{margin:0.5rem 0;padding:0.5rem;background:#161616;border-radius:8px;font-size:0.9rem;word-break:break-all;}
  .hashItem button{background:#ff006e;padding:0.3rem 0.8rem;font-size:0.8rem;border-radius:6px;margin-left:0.5rem;}
  .timer-glow{color:#ffcc00;text-shadow:0 0 10px #ffcc00,0 0 20px #ffaa00;animation:pulseGlow 2s infinite alternate;}
  @keyframes pulseGlow{from{text-shadow:0 0 10px #ffcc00,0 0 20px #ffaa00;}to{text-shadow:0 0 20px #ffaa00,0 0 40px #ff8800;}}
  .feed{background:#0d0d0d;border:1px solid #222;border-radius:10px;padding:1rem;margin-top:1rem;text-align:left;max-height:180px;overflow-y:auto;}
  .feed-entry{font-size:0.9rem;margin:0.4rem 0;}
  .feed-entry span{font-weight:bold;}
  .glow{color:#8b5cf6;text-shadow:0 0 10px #8b5cf6,0 0 20px #5c00ff;}
</style>
</head>

<body>
<h1>ğŸ›¡ï¸ PrivX Shield Relay Helper</h1>
<p><b>Built by Elite Team6 â€¢ Â© Elite Labs â€¢ v4.8 â€œPulse Editionâ€</b></p>

<div class="explainer">
  <h3>ğŸŒ The PrivX Vision â€” Strength in Numbers</h3>
  <p><b>PrivX isnâ€™t about hiding â€” itâ€™s about blending in.</b>  
  Every transaction joins a growing crowd. Every crowd becomes a human shield.  
  The more people who use the Shield Relay, the more complex, private, and resilient the network becomes.</p>
  <p><b>We donâ€™t hide. We outnumber.</b>  
  This is privacy by participation â€” transparent, decentralized, and unstoppable.</p>
</div>

<!-- ğŸ“œ Official CAs -->
<div class="section" style="background:#141414;">
  <h3>ğŸ“œ Official Contract Addresses</h3>
  <div class="ca-box">
    ğŸ’  PRIVX Token:<br>
    <code id="caToken">0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986</code>
    <button class="ca-copy" onclick="copyCA('caToken')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986" target="_blank">View on PulseChainScan â†—</a>
  </div>
  <div class="ca-box">
    ğŸ›¡ï¸ Shield Relay:<br>
    <code id="caRelay">0xccCFA11f70aBf3d32f38D93FEA4d31D5A99E19dA</code>
    <button class="ca-copy" onclick="copyCA('caRelay')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0xccCFA11f70aBf3d32f38D93FEA4d31D5A99E19dA" target="_blank">View on PulseChainScan â†—</a>
  </div>
  <small>âœ… Verified Immutable Contracts â€” No Admin, No Upgrades, 100 % On-Chain.</small>
</div>

<!-- ğŸ’  Tokenomics -->
<div class="section" style="background:#121212;">
  <h3>ğŸ’  PrivX Tokenomics</h3>
  <p>The <b>PRIVX</b> token powers the entire Shield ecosystem â€” fixed at <b>21 million PRIVX</b> total supply with no minting, no owner, and a built-in deflationary burn mechanism.</p>
  <p>Every use of the <b>Shield Relay</b> contributes to PRIVX scarcity: withdrawals incur a small 0.3 % burn, while expired deposits burn 95 % of their balance permanently.</p>
  <p>As the network expands, PRIVX will serve as the <b>â€œgas tokenâ€</b> for future cross-token relays â€” allowing any ERC-20 asset to pass through a PrivX-powered shield while consuming PRIVX for usage fees.</p>
  <small>âš™ï¸ Deflationary. Autonomous. Utility by design.</small>
</div>

<!-- ğŸ”¥ Burn Counter -->
<div class="section" style="background:#121212;">
  <h3>ğŸ”¥ Total PRIVX Burned</h3>
  <h2 id="burnCounter" class="glow">Loading...</h2>
  <small id="burnUpdate">â³ Fetching on-chain dataâ€¦</small>
</div>

<!-- ğŸ”’ Vault Tracker -->
<div class="section" id="vaultTracker" style="background:#121212;">
  <h3>ğŸ”’ Shield Vault Tracker</h3>
  <p>Total PRIVX currently locked in the Shield Relay:</p>
  <h2 id="vaultBalance" style="color:#00ff99;font-weight:bold;">Loading...</h2>
  <small id="vaultUpdate">â³ Waiting for dataâ€¦</small>
</div>

<p>Status: <span id="status">Disconnected</span></p>
<button id="connect">ğŸ”— Connect Wallet</button>
<button id="disconnect" style="display:none;background:#333;">ğŸ”Œ Disconnect</button>

<!-- Transaction Feed -->
<div class="section" style="background:#121212;">
  <h3>ğŸ“¡ Recent Transactions</h3>
  <div id="txFeed" class="feed">
    <p style="color:#777;">No recent transactions yet.</p>
  </div>
  <small>Updates in real time as you send transactions.</small>
</div>

<!-- DEPOSIT -->
<div class="section">
<h3>ğŸ’° Step 1 â€” Deposit PRIVX</h3>
<p>1ï¸âƒ£ Generate your <b>Secret & Hash</b> using the <a href="https://elitev5.github.io/PrivX/Hash-Generator/" target="_blank">official Hash Generator â†—</a>.</p>
<p>2ï¸âƒ£ Copy your <b>Hash</b> and paste it below.</p>
<p>3ï¸âƒ£ Enter how much PRIVX you want to deposit (e.g. 10).</p>
<input id="depositAmount" placeholder="Amount (e.g. 10)" /><br/>
<input id="depositHash" placeholder="Secret Hash (0xâ€¦)" /><br/>
<button id="approveBtn">âœ… Approve PRIVX (one-time)</button>
<button id="depositBtn">ğŸš€ Deposit</button>
<small>âš™ï¸ Approve once, then deposit anytime with new hashes.</small>
</div>
<!-- WITHDRAW -->
<div class="section">
<h3>ğŸ’ Step 2 â€” Withdraw Funds</h3>
<p>Use your <b>Secret</b> to withdraw to up to 3 wallet addresses within 7 days.</p>
<input id="withdrawSecret" placeholder="Secret (UTF-8 string)" /><br/>
<input id="wallet1" placeholder="Wallet 1 (0xâ€¦)" /><br/>
<input id="wallet2" placeholder="Wallet 2 (optional)" /><br/>
<input id="wallet3" placeholder="Wallet 3 (optional)" /><br/>
<button id="withdrawBtn">ğŸ’ Withdraw</button>
<small class="warning">âš ï¸ Anyone with your Secret can withdraw within 7 days â€” keep it safe.</small>
</div>

<!-- RECLAIM -->
<div class="section">
<h3>ğŸ”¥ Step 3 â€” Reclaim Expired Deposits</h3>
<p>After 7 days, anyone can reclaim unclaimed deposits using their hash.</p>
<input id="reclaimHash" placeholder="Deposit Hash (0xâ€¦)" /><br/>
<button id="reclaimBtn">ğŸ”¥ Reclaim</button>
<small>ğŸ’ Reclaim rewards 5 % to the caller â€¢ 95 % burned forever ğŸ”¥</small>
</div>

<!-- CLAIM HELPER -->
<div class="section" style="background:#161616;">
  <h3>ğŸ§© Claim Helper â€” Find Unclaimed Deposits</h3>
  <p>View all expired deposits ready to reclaim. Copy or reclaim directly below.</p>
  <button id="loadReclaimable">ğŸ” Load Reclaimable Hashes</button>
  <div id="reclaimList" class="hashList">Press the button to view reclaimable depositsâ€¦</div>
  <small>Auto-refreshes every 30 seconds â€¢ View-only â€¢ No wallet needed</small>
</div>

<!-- DEPOSIT CHECKER -->
<div class="section" style="background:#101010;">
  <h3>ğŸ” Check Your Deposit Status</h3>
  <p>Enter your <b>Deposit Hash</b> to see amount, date, and status (plus countdown timer).</p>
  <input id="checkHash" placeholder="Deposit Hash (0xâ€¦)" /><br/>
  <button id="checkBtn">ğŸ” Check Status</button>
  <div id="checkResult" style="margin-top:1rem;color:#00ff99;font-family:monospace;"></div>
  <small>Works even without wallet connection.</small>
</div>

<!-- ğŸ“˜ How It Works & Best Practices -->
<div class="section" style="background:#131313;">
  <h3>ğŸ“˜ How It Works â€” Step by Step</h3>
  <ol style="text-align:left;line-height:1.6em;">
    <li><b>Generate Secret & Hash</b> â€” Use the <a href="https://elitev5.github.io/PrivX/Hash-Generator/" target="_blank">Hash Generator</a> to create a unique pair.</li>
    <li><b>Deposit PRIVX</b> â€” Enter hash and amount, approve once, then deposit.</li>
    <li><b>Withdraw</b> â€” Within 7 days use your Secret to withdraw to up to 3 wallets (0.3 % burn).</li>
    <li><b>Reclaim</b> â€” After 7 days anyone can reclaim (95 % burn / 5 % reward).</li>
    <li><b>Check</b> â€” Verify any deposit on-chain by its hash.</li>
  </ol>

  <h3>ğŸ§­ Best Practices</h3>
  <ul style="text-align:left;line-height:1.6em;">
    <li>ğŸª™ <b>Backup your Secret.</b> Lose it = lose access.</li>
    <li>ğŸ” <b>Keep your Secret private.</b> Anyone with it can withdraw within 7 days.</li>
    <li>ğŸ•“ <b>Respect the 7-day window.</b> Withdraw on time or funds become claimable.</li>
    <li>ğŸ”¥ <b>Expired deposits burned.</b> 95 % destroyed â€¢ 5 % rewarded â€¢ no middlemen.</li>
    <li>âš™ï¸ <b>Verify contract addresses.</b> Only use official PRIVX and Shield Relay CAs.</li>
    <li>ğŸ§© <b>More users = more privacy.</b> Each deposit adds noise and protection.</li>
  </ul>

  <p style="color:#8b5cf6;font-weight:bold;margin-top:1rem;">â€œThe more we walk together, the harder we are to follow.â€</p>
  <p style="color:#00ffcc;">PrivX â€” Privacy by participation. Strength in numbers.</p>
</div>

<footer>
<hr>
<p>PulseChain Native â€¢ MIT License â€¢ Open Source</p>
<p><a href="https://github.com/elitev5/PrivX" target="_blank" rel="noopener noreferrer">View Source on GitHub</a></p>
<p style="margin-top:1rem;color:#8b5cf6;font-weight:bold;">â€œWe donâ€™t hide. We outnumber.â€</p>
</footer>

<!-- ==== MAIN LOGIC ==== -->
<script>
async function copyCA(id){
  const t=document.getElementById(id).textContent.trim();
  await navigator.clipboard.writeText(t);
  alert("âœ… Copied:\n"+t);
}

(async()=>{
const relayAddress="0xccCFA11f70aBf3d32f38D93FEA4d31D5A99E19dA";
const tokenAddress="0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986";
const PULSECHAIN_ID="0x171";
let provider,signer,contract,account,privx;
const abi=await fetch("./abi.json").then(r=>r.json());
const pubProv=new ethers.providers.JsonRpcProvider("https://rpc.pulsechain.com");
const pubContract=new ethers.Contract(relayAddress,abi,pubProv);

function addTxFeed(label,hash,status){
 const f=document.getElementById("txFeed");
 const a=document.createElement("div");
 a.className="feed-entry";
 a.innerHTML=`<span>${label}</span>: <a href="https://scan.pulsechain.com/tx/${hash}" target="_blank">${hash.slice(0,10)}â€¦</a> â€” ${status}`;
 f.prepend(a);
 while(f.childNodes.length>6)f.removeChild(f.lastChild);
}

async function updateVaultBalance(){
 try{
  const b=await pubContract.totalVaultBalance();
  document.getElementById("vaultBalance").textContent=ethers.utils.formatUnits(b,18)+" PRIVX";
  document.getElementById("vaultUpdate").textContent="âœ… Updated "+new Date().toLocaleTimeString();
 }catch(e){
  document.getElementById("vaultBalance").textContent="Error";
  document.getElementById("vaultUpdate").textContent=e.message;
 }}
setInterval(updateVaultBalance,15000);updateVaultBalance();

async function updateBurnCounter(){
 try{
  const burned=await pubContract.totalBurned();
  document.getElementById("burnCounter").textContent=ethers.utils.formatUnits(burned,18)+" PRIVX ğŸ”¥";
  document.getElementById("burnUpdate").textContent="âœ… Synced "+new Date().toLocaleTimeString();
 }catch(e){
  document.getElementById("burnCounter").textContent="Error";
  document.getElementById("burnUpdate").textContent=e.message;
 }}
setInterval(updateBurnCounter,20000);updateBurnCounter();

async function ensurePulse(){
 const c=await window.ethereum.request({method:"eth_chainId"});
 if(c!==PULSECHAIN_ID){alert("âš ï¸ Please switch to PulseChain.");return false;}
 return true;
}

async function connect(){
 if(!window.ethereum)return alert("No wallet found.");
 provider=new ethers.providers.Web3Provider(window.ethereum);
 await provider.send("eth_requestAccounts",[]);
 if(!await ensurePulse())return;
 signer=provider.getSigner();account=await signer.getAddress();
 document.getElementById("status").textContent="âœ… Connected: "+account.slice(0,6)+"â€¦"+account.slice(-4);
 document.getElementById("status").style.color="#0f0";
 document.getElementById("disconnect").style.display="inline-block";
 contract=new ethers.Contract(relayAddress,abi,signer);
 privx=new ethers.Contract(tokenAddress,["function approve(address,uint256) external returns(bool)"],signer);
 updateVaultBalance();updateBurnCounter();
}

function disconnect(){
 provider=signer=contract=privx=account=null;
 document.getElementById("status").textContent="Disconnected";
 document.getElementById("status").style.color="#f55";
 document.getElementById("disconnect").style.display="none";
 alert("Wallet disconnected.");
}

async function trackTx(label,txp){
 try{
  addTxFeed(label,txp.hash,"ğŸŸ¡ Pending");
  const r=await txp.wait();
  addTxFeed(label,txp.hash,"ğŸŸ¢ Confirmed ("+r.confirmations+")");
 }catch(e){
  addTxFeed(label,txp.hash,"ğŸ”´ Failed");
 }}

async function approve(){
 try{
  const tx=await privx.approve(relayAddress,ethers.constants.MaxUint256);
  alert("âœ… Approval sent! \n\nTx: "+tx.hash);
  trackTx("Approve",tx);
 }catch(e){alert("Approval failed:\n"+e.message);}
}

async function deposit(){
 const a=document.getElementById("depositAmount").value.trim(),
       h=document.getElementById("depositHash").value.trim();
 if(!a||!h)return alert("Enter amount and hash.");
 if(!await ensurePulse())return;
 try{
  const val=ethers.utils.parseUnits(a,18);
  const gas=await contract.estimateGas.deposit(val,h);
  if(!confirm(`Estimated Gas: ${gas.toString()}\nProceed?`))return;
  const tx=await contract.deposit(val,h);
  alert("âœ… Deposit submitted! \nTx: "+tx.hash);
  trackTx("Deposit",tx);updateVaultBalance();
 }catch(e){alert("Deposit failed:\n"+e.message);}
}

async function withdraw(){
 const s=document.getElementById("withdrawSecret").value.trim();
 const addrs=["wallet1","wallet2","wallet3"].map(i=>document.getElementById(i).value.trim()).filter(x=>x&&ethers.utils.isAddress(x));
 if(!s||addrs.length===0)return alert("Enter your Secret and at least one wallet address.");
 if(!await ensurePulse())return;
 try{
  const tx=await contract.withdraw(s,addrs);
  alert("âœ… Withdraw submitted!\nTx: "+tx.hash);
  trackTx("Withdraw",tx);updateVaultBalance();
 }catch(e){alert("Withdraw failed:\n"+e.message);}
}

async function reclaim(){
 const h=document.getElementById("reclaimHash").value.trim();
 if(!h)return alert("Enter deposit hash.");
 if(!await ensurePulse())return;
 try{
  const tx=await contract.reclaim(h);
  alert("âœ… Reclaim submitted!\nTx: "+tx.hash);
  trackTx("Reclaim",tx);updateVaultBalance();
 }catch(e){alert("Reclaim failed:\n"+e.message);}
}

async function loadReclaimable(){
 const list=document.getElementById("reclaimList");
 list.innerHTML="â³ Loadingâ€¦";
 try{
  const hashes=await pubContract.getReclaimableDeposits();
  if(!hashes.length){list.innerHTML="âœ… No reclaimable deposits now.";}
  else{
   list.innerHTML="";
   hashes.forEach(h=>{
    const d=document.createElement("div");
    d.className="hashItem";
    d.innerHTML=`<code>${h}</code> <button onclick="navigator.clipboard.writeText('${h}')">Copy</button>`;
    list.appendChild(d);
   });
  }
 }catch(e){list.innerHTML="âŒ Error: "+e.message;}
}
document.getElementById("loadReclaimable").onclick=loadReclaimable;
setInterval(loadReclaimable,30000);

async function checkDepositStatus(){
 const hash=document.getElementById("checkHash").value.trim();
 const res=document.getElementById("checkResult");
 if(!hash)return alert("Enter a deposit hash.");
 try{
  const d=await pubContract.getDeposit(hash);
  if(d.amount.eq(0)||d.timestamp.eq(0)){res.style.color="#f55";res.innerHTML="âŒ No deposit found.";return;}
  const amt=ethers.utils.formatUnits(d.amount,18);
  const dep=d.timestamp*1000,exp=dep+(7*24*60*60*1000),now=Date.now(),claimed=d.claimed;
  let status=claimed?"âœ… Claimed":"â³ Unclaimed";
  res.style.color="#00ff99";
  const updateTimer=()=>{
   const rem=exp-Date.now();
   if(rem<=0){clearInterval(tmr);
    res.innerHTML=`Amount: ${amt} PRIVX<br>Deposited: ${new Date(dep).toLocaleString()}<br>Status: ğŸ”¥ Claimable Now`;
   }else{
    const dys=Math.floor(rem/(1000*60*60*24)),h=Math.floor((rem/(1000*60*60))%24),
          m=Math.floor((rem/(1000*60))%60),s=Math.floor((rem/1000)%60);
    res.innerHTML=`Amount: ${amt} PRIVX<br>Deposited: ${new Date(dep).toLocaleString()}<br>Status: ${status}<br><span class="timer-glow">ğŸ•“ Time until claimable: ${dys}d ${h}h ${m}m ${s}s</span>`;
   }};
  updateTimer();
  const tmr=setInterval(updateTimer,1000);
 }catch(e){res.style.color="#f55";res.textContent="âŒ Error: "+e.message;}
}

document.getElementById("connect").onclick=connect;
document.getElementById("disconnect").onclick=disconnect;
document.getElementById("approveBtn").onclick=approve;
document.getElementById("depositBtn").onclick=deposit;
document.getElementById("withdrawBtn").onclick=withdraw;
document.getElementById("reclaimBtn").onclick=reclaim;
document.getElementById("checkBtn").onclick=checkDepositStatus;
})();
</script>
</body>
</html>
