<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PrivX Shield Relay â€” Official Helper v8 â€œReward Protocol Editionâ€</title>
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<style>
  body{font-family:system-ui,sans-serif;background:#0a0a0a;color:#eee;text-align:center;padding:2rem;max-width:900px;margin:auto}
  h1{color:#8b5cf6;font-size:2rem;margin-bottom:.3rem}
  h3{color:#00ffcc}
  a{color:#8b5cf6;text-decoration:none}
  a:hover{text-decoration:underline;color:#a36fff}
  button{background:#5c00ff;color:#fff;padding:.6rem 1rem;border:none;border-radius:8px;font-size:1rem;cursor:pointer;margin:.3rem;transition:.2s}
  button:hover{background:#6f14ff}
  button:disabled{background:#333;cursor:not-allowed}
  input{width:90%;max-width:420px;margin:.3rem 0;padding:.6rem;border-radius:8px;border:none;font-size:1rem;text-align:center;background:#161616;color:#00ffcc}
  .section{border:1px solid #222;border-radius:12px;padding:1.3rem;margin:1.5rem 0;background:#111}
  #status{margin-bottom:1rem;color:#f55;font-weight:bold}
  footer{margin-top:2rem;font-size:.9rem;color:#777}
  small{color:#aaa;display:block;margin-top:.5rem}
  .warning{color:#ffcc00}
  hr{border:none;border-top:1px solid #333;margin:1.5rem 0}
  .ca-box{background:#161616;padding:0.6rem;border-radius:8px;margin:0.3rem 0;word-break:break-all}
  .ca-copy{background:#333;color:#00ffcc;border:none;border-radius:6px;padding:0.3rem 0.7rem;cursor:pointer;font-size:0.85rem;margin-left:0.4rem;}
  .ca-copy:hover{background:#555;}
  .explainer{background:#141414;border-left:5px solid #8b5cf6;padding:1rem;border-radius:8px;text-align:left;line-height:1.5em;margin-bottom:1.5rem;}
  .hashList{background:#0f0f0f;border-radius:10px;padding:1rem;margin-top:1rem;text-align:left;max-height:220px;overflow-y:auto;}
  .hashItem{margin:0.5rem 0;padding:0.5rem;background:#161616;border-radius:8px;font-size:0.9rem;word-break:break-all;}
  .hashItem button{background:#ff006e;padding:0.3rem 0.8rem;font-size:0.8rem;border-radius:6px;margin-left:0.5rem;}
  .timer-glow{color:#ffcc00;text-shadow:0 0 10px #ffcc00,0 0 20px #ffaa00;animation:pulseGlow 2s infinite alternate;}
  @keyframes pulseGlow{from{text-shadow:0 0 10px #ffcc00,0 0 20px #ffaa00;}to{text-shadow:0 0 20px #ffaa00,0 0 40px #ff8800;}}
  .feed{background:#0d0d0d;border:1px solid #222;border-radius:10px;padding:1rem;margin-top:1rem;text-align:left;max-height:180px;overflow-y:auto;}
  .feed-entry{font-size:0.9rem;margin:0.4rem 0;}
  .feed-entry span{font-weight:bold;}
  .glow{color:#8b5cf6;text-shadow:0 0 10px #8b5cf6,0 0 20px #5c00ff;}
</style>
</head>

<body>
<h1>ğŸ›¡ï¸ PrivX Shield Relay Helper â€” v8 â€œReward Protocol Editionâ€</h1>
<p><b>Built by Elite Team6 â€¢ Â© Elite Labs â€¢ 2025</b></p>

<!-- ğŸŒ WHY PRIVX SECTION -->
<div class="explainer" id="why-privx">
  <h3>ğŸŒ Why PrivX Exists â€” Privacy That Accelerates With Participation</h3>
  <p><b>PrivX isnâ€™t about hiding â€” itâ€™s about blending in faster.</b></p>
  <p>Modern blockchains are transparent by design. Every wallet, every transfer, every pattern is visible forever.  
  <b>PrivX</b> transforms this transparency into a collective privacy shield, powered by mathematics â€” not secrecy.</p>
  <hr>
  <h4>ğŸ§  The Core Mechanism</h4>
  <p>Each deposit in the Shield Relay is locked under a <code>keccak256(secret)</code> hash.  
  The <b>secret</b> remains private, while the <b>hash</b> becomes your on-chain proof.  
  When the secret is revealed, it matches the stored hash and releases the tokens.</p>
  <p>As hundreds or thousands of users do this â€” at different times and amounts â€” it becomes statistically impossible to know which deposit maps to which withdrawal.</p>
  <hr>
  <h4>ğŸ§® The Mathematics of Participation</h4>
  <pre style="background:#0d0d0d;padding:0.8rem;border-radius:8px;color:#00ffcc;">T âˆ 1 / (A Ã— W)</pre>
  <ul style="text-align:left;line-height:1.5em;">
    <li><b>A</b> = active deposits (crowd size)</li>
    <li><b>W</b> = number of withdrawal wallets</li>
    <li><b>T</b> = time needed for unlinkability</li>
  </ul>
  <p>The more users join, and the more wallets used per secret, the faster privacy becomes statistically untraceable.</p>
  <blockquote style="border-left:3px solid #8b5cf6;padding-left:1rem;margin:1rem 0;color:#ccc;">
    â€œIn PrivX, privacy accelerates with adoption â€” the more people, the faster the shield.â€
  </blockquote>
  <h4>ğŸ•“ Time and Entropy</h4>
  <p>Each deposit lasts 7 days before expiry. Within that window, withdrawals are indistinguishable.  
  After expiry, 95% burns permanently and 5% rewards reclaimers â€” ensuring the vault is always in motion and unpredictable.</p>
  <h4>âš™ï¸ Transparent Privacy</h4>
  <p>All actions are public and auditable â€” yet linkages vanish within the crowd.  
  PrivX achieves privacy without encryption, without custodians, and without compromise.</p>
</div>

<!-- ğŸ“œ CONTRACT ADDRESSES -->
<div class="section" style="background:#141414;">
  <h3>ğŸ“œ Official Contract Addresses</h3>
  <div class="ca-box">
    ğŸ’  PRIVX Token:<br>
    <code id="caToken">0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986</code>
    <button class="ca-copy" onclick="copyCA('caToken')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986" target="_blank">View on PulseChainScan â†—</a>
  </div>
  <div class="ca-box">
    ğŸ›¡ï¸ Shield Relay V8:<br>
    <code id="caRelay">0x9ef6144a2f544A28e030e69a79c5B527c8B48f2e</code>
    <button class="ca-copy" onclick="copyCA('caRelay')">Copy</button><br>
    <a href="https://scan.pulsechain.com/address/0x9ef6144a2f544A28e030e69a79c5B527c8B48f2e" target="_blank">View on PulseChainScan â†—</a>
  </div>
  <small>âœ… Verified Immutable Contracts â€” No Admin â€¢ No Upgrades â€¢ 100% On-Chain</small>
</div>

<!-- ğŸ’ REWARD PROTOCOL -->
<div class="section" style="background:#121212;">
  <h3>ğŸ’ The Reward Protocol â€” Earning While Strengthening Privacy</h3>
  <p>PrivX v8 introduces a <b>live reward system</b> designed to <b>incentivize participation</b> and <b>reward community strength</b>.</p>
  <ul style="text-align:left;line-height:1.5em;">
    <li>ğŸŸ£ <b>5% of expired deposits</b> is distributed as <b>reclaim rewards</b> to active participants.</li>
    <li>ğŸ’  The <b>Reward Pool</b> grows dynamically as users reclaim and interact with the Shield.</li>
    <li>âš¡ Rewards are claimless â€” automatically distributed to active relayers via the <code>RewardDistributed</code> event.</li>
    <li>ğŸ“ˆ The more you participate, the higher your reward potential and privacy strength.</li>
  </ul>
  <p style="color:#8b5cf6;font-weight:bold;margin-top:0.8rem;">
    â€œIn PrivX v8, privacy pays back â€” contribution becomes participation, and participation becomes reward.â€
  </p>
</div>

<!-- ğŸ’  TOKENOMICS (unchanged) -->
<div class="section" style="background:#121212;">
  <h3>ğŸ’  PrivX Tokenomics</h3>
  <p>The <b>PRIVX</b> token powers the entire Shield ecosystem â€” fixed at <b>21 million PRIVX</b> total supply with no minting, no owner, and a built-in deflationary burn mechanism.</p>
  <p>Every use of the <b>Shield Relay</b> contributes to PRIVX scarcity: withdrawals incur a small 0.3% burn, while expired deposits burn 95% of their balance permanently.</p>
  <p>As the network expands, PRIVX also fuels the <b>Reward Pool</b>, letting users earn passive returns for keeping the network alive and private.</p>
  <small>âš™ï¸ Deflationary â€¢ Autonomous â€¢ Utility-Driven by Design</small>
</div>
<script>
async function copyCA(id){
  const text=document.getElementById(id).textContent.trim();
  await navigator.clipboard.writeText(text);
  alert("âœ… Copied:\n"+text);
}

(async()=>{
const relayAddress="0x9ef6144a2f544A28e030e69a79c5B527c8B48f2e";
const tokenAddress="0x34310B5d3a8d1e5f8e4A40dcf38E48d90170E986";
const PULSECHAIN_ID="0x171";

let provider,signer,contract,account,privx;
const abi=await fetch("./abi.json").then(r=>r.json());
const pubProv=new ethers.providers.JsonRpcProvider("https://rpc.pulsechain.com");
const pubContract=new ethers.Contract(relayAddress,abi,pubProv);

function addFeed(target,label,hash,status){
 const feed=document.getElementById(target);
 const entry=document.createElement("div");
 entry.className="feed-entry";
 entry.innerHTML=`<span>${label}</span>: <a href="https://scan.pulsechain.com/tx/${hash}" target="_blank">${hash.slice(0,10)}â€¦</a> â€” ${status}`;
 feed.prepend(entry);
 while(feed.childNodes.length>8)feed.removeChild(feed.lastChild);
}

// ğŸ”¥ Update on-chain stats
async function updateVault(){
 try{
  const bal=await pubContract.totalVaultBalance();
  document.getElementById("vaultBalance").textContent=ethers.utils.formatUnits(bal,18)+" PRIVX";
  document.getElementById("vaultUpdate").textContent="âœ… Updated "+new Date().toLocaleTimeString();
 }catch(e){document.getElementById("vaultBalance").textContent="Error";document.getElementById("vaultUpdate").textContent=e.message;}
}
async function updateBurn(){
 try{
  const burned=await pubContract.totalBurned();
  document.getElementById("burnCounter").textContent=ethers.utils.formatUnits(burned,18)+" PRIVX ğŸ”¥";
  document.getElementById("burnUpdate").textContent="âœ… Synced "+new Date().toLocaleTimeString();
 }catch(e){document.getElementById("burnCounter").textContent="Error";document.getElementById("burnUpdate").textContent=e.message;}
}
async function updateReward(){
 try{
  const pool=await pubContract.getRewardPool();
  document.getElementById("rewardPool").textContent=ethers.utils.formatUnits(pool,18)+" PRIVX ğŸŸ£";
  document.getElementById("rewardUpdate").textContent="âœ… Live "+new Date().toLocaleTimeString();
 }catch(e){document.getElementById("rewardPool").textContent="Error";document.getElementById("rewardUpdate").textContent=e.message;}
}
setInterval(updateVault,15000);updateVault();
setInterval(updateBurn,20000);updateBurn();
setInterval(updateReward,15000);updateReward();

// ğŸ›  Network + Wallet
async function ensurePulse(){
 const chain=await window.ethereum.request({method:"eth_chainId"});
 if(chain!==PULSECHAIN_ID){alert("âš ï¸ Please switch to PulseChain.");return false;}
 return true;
}
async function connect(){
 if(!window.ethereum)return alert("No wallet found.");
 provider=new ethers.providers.Web3Provider(window.ethereum);
 await provider.send("eth_requestAccounts",[]);
 if(!await ensurePulse())return;
 signer=provider.getSigner();account=await signer.getAddress();
 document.getElementById("status").textContent="âœ… Connected: "+account.slice(0,6)+"â€¦"+account.slice(-4);
 document.getElementById("status").style.color="#0f0";
 document.getElementById("disconnect").style.display="inline-block";
 contract=new ethers.Contract(relayAddress,abi,signer);
 privx=new ethers.Contract(tokenAddress,["function approve(address,uint256) external returns(bool)"],signer);
 updateVault();updateBurn();updateReward();
 // ğŸ“¡ Listen for live RewardDistributed events
 contract.on("RewardDistributed",(receiver,amount,remaining)=>{
   const feed=document.getElementById("txFeed");
   const e=document.createElement("div");
   e.className="feed-entry";
   e.innerHTML=`ğŸ’ Reward â†’ <span>${receiver.slice(0,6)}â€¦</span> +${ethers.utils.formatUnits(amount,18)} PRIVX`;
   feed.prepend(e);
   while(feed.childNodes.length>10)feed.removeChild(feed.lastChild);
   updateReward();
 });
}
function disconnect(){
 provider=signer=contract=privx=account=null;
 document.getElementById("status").textContent="Disconnected";
 document.getElementById("status").style.color="#f55";
 document.getElementById("disconnect").style.display="none";
 alert("Wallet disconnected.");
}

// ğŸ“¦ Utility
async function trackTx(label,tx){
 try{
  addFeed("txFeed",label,tx.hash,"ğŸŸ¡ Pending");
  const receipt=await tx.wait();
  addFeed("txFeed",label,tx.hash,receipt.status?"ğŸŸ¢ Confirmed":"ğŸ”´ Reverted");
 }catch(e){addFeed("txFeed",label,tx.hash,"ğŸ”´ Failed");}
}

// âœ… Approve / Deposit / Withdraw / Reclaim
async function approve(){
 try{
  const tx=await privx.approve(relayAddress,ethers.constants.MaxUint256);
  alert("âœ… Approval sent:\n"+tx.hash);trackTx("Approve",tx);
 }catch(e){alert("Approval failed:\n"+e.message);}
}
async function deposit(){
 const amt=document.getElementById("depositAmount").value.trim();
 const hash=document.getElementById("depositHash").value.trim();
 if(!amt||!hash)return alert("Enter amount and hash.");
 if(!await ensurePulse())return;
 try{
  const value=ethers.utils.parseUnits(amt,18);
  const gasLimit=await contract.estimateGas.deposit(value,hash);
  const gasPrice=await provider.getGasPrice();
  const cost=parseFloat(ethers.utils.formatEther(gasLimit.mul(gasPrice))).toFixed(4);
  if(!confirm(`Estimated gas â‰ˆ ${cost} PLS\nProceed?`))return;
  const tx=await contract.deposit(value,hash);
  alert("â³ Deposit pending:\n"+tx.hash);
  await trackTx("Deposit",tx);updateVault();updateReward();
 }catch(e){alert("Deposit failed:\n"+e.message);}
}
async function withdraw(){
 const secret=document.getElementById("withdrawSecret").value.trim();
 const addrs=["wallet1","wallet2","wallet3"].map(i=>document.getElementById(i).value.trim()).filter(a=>a&&ethers.utils.isAddress(a));
 if(!secret||!addrs.length)return alert("Enter Secret and at least one wallet.");
 if(!await ensurePulse())return;
 try{
  const tx=await contract.withdraw(secret,addrs);
  alert("âœ… Withdraw sent:\n"+tx.hash);trackTx("Withdraw",tx);
  updateVault();updateReward();
 }catch(e){alert("Withdraw failed:\n"+e.message);}
}
async function reclaim(){
 const hash=document.getElementById("reclaimHash").value.trim();
 if(!hash)return alert("Enter deposit hash.");
 if(!await ensurePulse())return;
 try{
  const tx=await contract.reclaim(hash);
  alert("ğŸ”¥ Reclaim sent:\n"+tx.hash);trackTx("Reclaim",tx);
  updateVault();updateBurn();updateReward();
 }catch(e){alert("Reclaim failed:\n"+e.message);}
}

// ğŸ§© Reclaimable list
async function loadReclaimable(){
 const box=document.getElementById("reclaimList");
 box.innerHTML="â³ Loadingâ€¦";
 try{
  const hashes=await pubContract.getReclaimableDeposits();
  if(!hashes.length)return box.innerHTML="âœ… No reclaimable deposits now.";
  box.innerHTML="";
  hashes.forEach(h=>{
    const d=document.createElement("div");
    d.className="hashItem";
    d.innerHTML=`<code>${h}</code> <button onclick="navigator.clipboard.writeText('${h}')">Copy</button>`;
    box.appendChild(d);
  });
 }catch(e){box.innerHTML="âŒ Error: "+e.message;}
}
document.getElementById("loadReclaimable").onclick=loadReclaimable;
setInterval(loadReclaimable,30000);

// ğŸ” Deposit Status Checker
async function checkDepositStatus(){
 const hash=document.getElementById("checkHash").value.trim();
 const res=document.getElementById("checkResult");
 if(!hash)return alert("Enter a deposit hash.");
 res.style.color="#aaa";res.innerHTML="â³ Checkingâ€¦";
 try{
  const d=await pubContract.getDeposit(hash);
  if(d.amount.isZero()){res.style.color="#f55";return res.textContent="âŒ No deposit found.";}
  const amt=ethers.utils.formatUnits(d.amount,18);
  const dep=d.timestamp*1000,exp=dep+7*24*60*60*1000;
  const refresh=async()=>{
    const fresh=await pubContract.getDeposit(hash);
    const now=Date.now(),remain=exp-now;
    if(fresh.claimed||remain<=0){
      clearInterval(window._timer);
      res.style.color=fresh.claimed?"#0f0":"#ffcc00";
      return res.innerHTML=`Amount: ${amt} PRIVX<br>Deposited: ${new Date(dep).toLocaleString()}<br>Status: ${fresh.claimed?"âœ… Claimed":"ğŸ”¥ Claimable Now"}`;
    }
    const dS=Math.floor(remain/86400000),hS=Math.floor(remain/3600000)%24,mS=Math.floor(remain/60000)%60,sS=Math.floor(remain/1000)%60;
    res.innerHTML=`Amount: ${amt} PRIVX<br>Deposited: ${new Date(dep).toLocaleString()}<br>Status: â³ Unclaimed<br><span class='timer-glow'>ğŸ•“ ${dS}d ${hS}h ${mS}m ${sS}s</span>`;
  };
  if(window._timer)clearInterval(window._timer);refresh();window._timer=setInterval(refresh,2000);
 }catch(e){res.style.color="#f55";res.textContent="âŒ Error: "+e.message;}
}

// Button Bindings
document.getElementById("connect").onclick=connect;
document.getElementById("disconnect").onclick=disconnect;
document.getElementById("approveBtn").onclick=approve;
document.getElementById("depositBtn").onclick=deposit;
document.getElementById("withdrawBtn").onclick=withdraw;
document.getElementById("reclaimBtn").onclick=reclaim;
document.getElementById("checkBtn").onclick=checkDepositStatus;
})();
</script>

