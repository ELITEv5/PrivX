<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>PrivX Hash Generator â€” V9 â€œCommitâ€“Reveal Editionâ€</title>
<script src="./ethers.umd.min.js"></script>
<style>
  body{font-family:system-ui,sans-serif;background:#0a0a0a;color:#eee;text-align:center;padding:2rem;max-width:820px;margin:auto}
  h1{color:#8b5cf6;text-shadow:0 0 12px #5c00ff;margin-bottom:.5rem}
  h3{color:#00ffcc}
  button{padding:.7rem 1.2rem;background:#5c00ff;color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:1rem;margin:.3rem;transition:.2s}
  button:hover{background:#6f14ff}
  input{width:90%;max-width:420px;margin:.4rem 0;padding:.6rem;border-radius:8px;border:none;background:#161616;color:#00ffcc;text-align:center}
  pre{background:#111;color:#00ff99;padding:1rem;border-radius:8px;font-size:.9rem;text-align:left;white-space:pre-wrap;word-break:break-all}
  small{color:#aaa;display:block;margin-top:1rem}
  .instructions{background:#141414;padding:1rem;border-radius:10px;text-align:left;margin-bottom:1.5rem;line-height:1.6em;border-left:5px solid #8b5cf6}
  .section{background:#121212;border-radius:12px;padding:1.5rem;margin:1.5rem 0;border:1px solid #222}
  #unsavedWarning{display:none;background:#ffcc00;color:#000;padding:.8rem;border-radius:8px;margin-bottom:1rem;font-weight:bold}
  #successMessage{display:none;color:#00ff99;font-weight:bold;text-shadow:0 0 10px #00ff99;margin-top:.8rem;animation:glowPulse 2s infinite alternate}
  @keyframes glowPulse{from{text-shadow:0 0 10px #00ff99}to{text-shadow:0 0 20px #00ffcc}}
</style>
</head>

<body>
<h1>ğŸ” PrivX Hash Generator â€” V9 â€œCommitâ€“Reveal Editionâ€</h1>
<p>This tool runs 100 % locally in your browser. Nothing ever leaves your device.</p>

<div class="instructions">
  <h3>ğŸ§­ Step-by-Step Guide</h3>
  <ol>
    <li>Select which role you are using: <b>Depositor</b> or <b>Withdrawer</b>.</li>
    <li>
      <b>Depositor Mode</b> â€“ only needs a <b>Secret</b>.<br>
      The generator will output:
      <ul>
        <li>ğŸ§© <b>Secret</b> â€“ used later for withdrawal (keep private).</li>
        <li>ğŸ’  <b>Deposit Hash</b> â€“ supplied when depositing PRIVX.</li>
      </ul>
    </li>
    <li>
      <b>Withdrawer Mode</b> â€“ requires your wallet address.<br>
      The generator will output:
      <ul>
        <li>ğŸ§© <b>Secret</b> (you will receive it from the depositor).</li>
        <li>ğŸ’  <b>Deposit Hash</b> (for reference only).</li>
        <li>ğŸ”’ <b>Commit Hash</b> â€“ submit before withdrawing (anti-front-run).</li>
      </ul>
    </li>
    <li>
      Copy or save your results securely. <b>Lose the Secret = lose the funds.</b><br>
      âš ï¸ Each secret and hash set is <b>one-time use only</b>. Never reuse them.
    </li>
  </ol>
  <p style="color:#00ffcc;">ğŸ’¡ You can save this file and run it offline for maximum privacy.</p>
</div>

<div class="section">
  <div>
    <label><input type="radio" name="mode" id="modeDeposit" checked> Depositor Mode</label>
    <label style="margin-left:1rem;"><input type="radio" name="mode" id="modeWithdraw"> Withdrawer Mode</label>
  </div>

  <input id="walletInput" placeholder="(Withdrawer Mode only) Enter wallet address (0xâ€¦)" disabled />
  <div id="unsavedWarning">âš ï¸ You have an unsaved Secret! Copy or save it before generating a new one.</div>

  <button id="generate">ğŸ§© Generate Secret + Hashes</button>
  <button id="copyAll" disabled>ğŸ“‹ Copy All</button>
  <button id="saveTxt" disabled>ğŸ’¾ Save .txt</button>

  <div id="successMessage">âœ… Hashes generated successfully!</div>

  <pre id="output">Choose a mode and click â€œGenerateâ€ to create your Secret, Deposit Hash, and (if applicable) Commit Hash.</pre>
  <small>ğŸ’¡ The Secret is private â€” only Deposit / Commit hashes are safe to share.</small>
</div>

<script>
let secret="",depositHash="",commitHash="";
const walletInput=document.getElementById("walletInput");
const warnBanner=document.getElementById("unsavedWarning");
const successMsg=document.getElementById("successMessage");
const modeDeposit=document.getElementById("modeDeposit");
const modeWithdraw=document.getElementById("modeWithdraw");

modeDeposit.onchange=()=>walletInput.disabled=true;
modeWithdraw.onchange=()=>walletInput.disabled=false;

document.getElementById("generate").onclick=()=>{
  if(typeof ethers==="undefined"){alert("âŒ Ethers.js not loaded.");return;}

  const withdrawMode=modeWithdraw.checked;
  const wallet=walletInput.value.trim();

  if(withdrawMode && !ethers.utils.isAddress(wallet)){
    alert("âŒ Please enter a valid wallet address for Withdrawer Mode.");
    return;
  }

  if(secret&&depositHash){
    if(!confirm("âš ï¸ You already have an unsaved Secret.\nGenerate a new one?"))return;
  }

  const bytes=crypto.getRandomValues(new Uint8Array(32));
  secret=Array.from(bytes).map(b=>b.toString(16).padStart(2,"0")).join("");

  const abi=new ethers.utils.AbiCoder();
  const encoded=abi.encode(["string"],[secret]);
  depositHash=ethers.utils.keccak256(encoded);

  if(withdrawMode){
    const packed=ethers.utils.solidityPack(["string","address"],[secret,wallet]);
    commitHash=ethers.utils.keccak256(packed);
  }else{
    commitHash="(Commit hash generated later by withdrawer)";
  }

  document.getElementById("output").textContent=
`ğŸ§© Secret (keep private, used for withdrawal):
${secret}

ğŸ’  Deposit Hash (for deposit):
${depositHash}

ğŸ”’ Commit Hash${withdrawMode?" (for commit before withdraw)":" (N/A in Depositor Mode)"}:
${commitHash}

âš ï¸ Keep your Secret private.
Only share the Deposit Hash with the depositor/withdrawer as appropriate.`;

  document.getElementById("copyAll").disabled=false;
  document.getElementById("saveTxt").disabled=false;
  warnBanner.style.display="block";
  successMsg.style.display="block";
  setTimeout(()=>successMsg.style.display="none",8000);
};

document.getElementById("copyAll").onclick=async()=>{
  const text=`Secret:\n${secret}\n\nDeposit Hash:\n${depositHash}\n\nCommit Hash:\n${commitHash}`;
  await navigator.clipboard.writeText(text);
  alert("âœ… All values copied to clipboard");
  warnBanner.style.display="none";
};

document.getElementById("saveTxt").onclick=()=>{
  const mode=modeWithdraw.checked?"Withdrawer":"Depositor";
  const content=`PrivX V9 Commitâ€“Reveal Generator Output (${mode} Mode)

Secret (keep private):
${secret}

Deposit Hash (for deposit):
${depositHash}

Commit Hash${modeWithdraw.checked?" (for commit before withdraw)":" (to be generated by withdrawer)"}:
${commitHash}

âš ï¸ Share only the Secret securely with your counterparty within 7 days.
After 7 days funds become reclaimable (95 % burn / 5 % reward).`;

  const blob=new Blob([content],{type:"text/plain"});
  const link=document.createElement("a");
  link.href=URL.createObjectURL(blob);
  link.download=`PrivX-V9-${mode.toLowerCase()}-hashes.txt`;
  link.click();
  warnBanner.style.display="none";
};
</script>

<footer style="margin-top:2rem;font-size:.85rem;color:#777;text-align:center;">
  <hr style="border:none;border-top:1px solid #333;margin:1.5rem 0;">
  <p>V9 Commitâ€“Reveal Edition â€¢ Last updated: Nov 2025<br>
  Built by <b>Elite Team6</b> â€¢ Â© Elite Labs 2025<br>
  <a href="https://github.com/elitev5/PrivX" target="_blank" style="color:#8b5cf6;">View on GitHub</a></p>
</footer>
</body>
</html>



